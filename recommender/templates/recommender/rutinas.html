{% extends 'recommender/base.html' %}

{% block title %}Cat√°logo de Rutinas{% endblock %}

{% block content %}
<section class="catalogo-hero">
    <div class="container">
        <h1>Cat√°logo de Rutinas</h1>
        <p>Explora todas las rutinas disponibles</p>
    </div>
</section>

<section class="filtros-section">
    <div class="container">
        <form method="GET" class="filtros-form">
            <div class="filtro-group">
                <label for="nivel">Nivel:</label>
                <select id="nivel" name="nivel">
                    <option value="">Todos</option>
                    <option value="principiante" {% if nivel_filtro == 'principiante' %}selected{% endif %}>Principiante</option>
                    <option value="intermedio" {% if nivel_filtro == 'intermedio' %}selected{% endif %}>Intermedio</option>
                    <option value="avanzado" {% if nivel_filtro == 'avanzado' %}selected{% endif %}>Avanzado</option>
                </select>
            </div>
            
            <div class="filtro-group">
                <label for="objetivo">Objetivo:</label>
                <select id="objetivo" name="objetivo">
                    <option value="">Todos</option>
                    <option value="peso" {% if objetivo_filtro == 'peso' %}selected{% endif %}>P√©rdida de Peso</option>
                    <option value="musculacion" {% if objetivo_filtro == 'musculacion' %}selected{% endif %}>Ganancia Muscular</option>
                    <option value="mantenimiento" {% if objetivo_filtro == 'mantenimiento' %}selected{% endif %}>Mantenimiento</option>
                </select>
            </div>
            
            <button type="submit" class="btn btn-primary">Aplicar Filtros</button>
            <a href="{% url 'recommender:rutinas' %}" class="btn btn-secondary">Limpiar</a>
        </form>
        
        <div class="estadisticas">
            <p><strong>Mostrando {{ total_rutinas }} rutinas</strong></p>
            {% if estadisticas.total > 0 %}
            <p>Duraci√≥n promedio: {{ estadisticas.duracion_promedio }} min | D√≠as promedio: {{ estadisticas.dias_promedio }}</p>
            {% endif %}
        </div>
    </div>
</section>

<section class="catalogo-grid-section">
    <div class="container">
        <div class="rutinas-grid">
            {% for rutina in rutinas %}
            <div class="rutina-card">
                <div class="rutina-card-header">
                    <h3>{{ rutina.nombre }}</h3>
                    <div class="badges">
                        <span class="badge badge-{{ rutina.nivel }}">{{ rutina.nivel|title }}</span>
                        <span class="badge badge-{{ rutina.intensidad }}">{{ rutina.intensidad|title }}</span>
                    </div>
                </div>
                
                <p class="rutina-card-desc">{{ rutina.descripcion|truncatewords:25 }}</p>
                
                <div class="rutina-card-info">
                    <div class="info-item">
                        <span class="info-icon">üìÖ</span>
                        <span>{{ rutina.dias_semana }} d√≠as/sem</span>
                    </div>
                    <div class="info-item">
                        <span class="info-icon">‚è±Ô∏è</span>
                        <span>{{ rutina.duracion_minutos }} min</span>
                    </div>
                    <div class="info-item">
                        <span class="info-icon">üéØ</span>
                        <span>{{ rutina.objetivo|title }}</span>
                    </div>
                </div>
                
                <div class="rutina-card-ejercicios">
                    <p><strong>Ejercicios:</strong></p>
                    <ul>
                        {% for ejercicio in rutina.ejercicios|slice:":3" %}
                        <li>{{ ejercicio|truncatewords:5 }}</li>
                        {% endfor %}
                        {% if rutina.ejercicios|length > 3 %}
                        <li>+ {{ rutina.ejercicios|length|add:"-3" }} m√°s...</li>
                        {% endif %}
                    </ul>
                </div>
            </div>
            {% empty %}
            <div class="no-resultados">
                <p>No se encontraron rutinas con los filtros seleccionados.</p>
                <a href="{% url 'recommender:rutinas' %}" class="btn btn-primary">Ver todas</a>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<section class="cta-section">
    <div class="container">
        <h2>¬øNecesitas una recomendaci√≥n personalizada?</h2>
        <p>Completa nuestro formulario y obt√©n la rutina perfecta para ti</p>
        <a href="{% url 'recommender:index' %}" class="btn btn-primary btn-large">Obtener Recomendaci√≥n</a>
    </div>
</section>
{% endblock %}
